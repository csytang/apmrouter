<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Oct 25, 2012 12:35:07 PM by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class entity-name="metric" table="METRIC" schema="PUBLIC" catalog="DB">
        <id name="metricId" type="java.lang.Long">
            <column name="METRIC_ID" />
            <generator class="identity" />
        </id>
        <many-to-one name="traceType" entity-name="type" fetch="select" embed-xml="true">
            <column name="TYPE_ID" not-null="true">
                <comment>The metric type of the metric</comment>
            </column>
        </many-to-one>
        <many-to-one name="agent" entity-name="agent" fetch="select" embed-xml="true">
            <column name="AGENT_ID" not-null="true">
                <comment>The agent identifier for this metric</comment>
            </column>
        </many-to-one>
        <property name="namespace" type="string">
            <column name="NAMESPACE" length="200">
                <comment>The namespace of the metric</comment>
            </column>
        </property>
        <property name="level" type="short">
            <column name="LEVEL" not-null="true">
                <comment>The number of namespaces in the namespace</comment>
            </column>
        </property>
        <property name="name" type="string">
            <column name="NAME" length="60">
                <comment>The point of the metric name</comment>
            </column>
        </property>
        <property name="firstSeen" type="timestamp">
            <column name="FIRST_SEEN" length="23" not-null="true">
                <comment>The first time this metric was seen</comment>
            </column>
        </property>
        <property name="lastSeen" type="timestamp">
            <column name="LAST_SEEN" length="23">
                <comment>The last time this metric was seen</comment>
            </column>
        </property>
    </class>
     <query name="findFirstLevelMetricsForAgent">from metric m where m.agent.agentId = :agentId and m.level = m.agent.minLevel</query>
     <query name="findMetricsForAgent">from metric m where m.agent.agentId = ? and m.level = ?</query>
</hibernate-mapping>
